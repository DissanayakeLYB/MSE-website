<script>
  (function () {
    const MOBILE_BREAKPOINT = 950; // px - change this to tune when hamburger appears

    /* ---------- utility: create element with attrs ---------- */
    function el(tag, attrs = {}, children = []) {
      const e = document.createElement(tag);
      for (const [k, v] of Object.entries(attrs)) {
        if (k === "style" && typeof v === "object") Object.assign(e.style, v);
        else if (k.startsWith("on") && typeof v === "function") e[k] = v;
        else if (k === "html") e.innerHTML = v;
        else e.setAttribute(k, v);
      }
      (Array.isArray(children) ? children : [children]).forEach((ch) => {
        if (!ch) return;
        if (typeof ch === "string") e.appendChild(document.createTextNode(ch));
        else e.appendChild(ch);
      });
      return e;
    }

    /* =============================
     ORIGINAL PAGE CLEANUP + BODY BG
     ============================= */
    document.addEventListener("DOMContentLoaded", function () {
      // Remove by ID
      const idsToRemove = [
        "banner",
        "footer-top",
        "footer",
        "subfooter",
        "block-scholarly-page-title",
      ];
      idsToRemove.forEach((id) => {
        let elmt = document.getElementById(id);
        if (elmt && elmt.parentNode) elmt.parentNode.removeChild(elmt);
      });

      // Remove by element (header tag)
      document.querySelector("div.node--content > header")?.remove();

      // Remove by class: split multi-class entry into separate class checks
      const classesToRemove = [
        "to-top",
        "dialog-off-canvas-main-canvas",
        "col-md-4",
        "fix-sidebar-second",
      ];
      classesToRemove.forEach((className) => {
        Array.from(document.getElementsByClassName(className)).forEach(
          (elmt) => {
            if (elmt && elmt.parentNode) elmt.parentNode.removeChild(elmt);
          }
        );
      });

      // Expand content section
      document.querySelectorAll("section.col-md-8").forEach((section) => {
        section.style.width = "100%";
        section.style.boxSizing = "border-box";
      });

      // Make body a flex container for sticky footer and set a soft off-white background
      Object.assign(document.body.style, {
        margin: "0",
        minHeight: "100vh",
        display: "flex",
        flexDirection: "column",
        backgroundColor: "#fbfbfd" /* soft off-white for whole page */,
      });
    });

    /* =============================
     MENU DATA
     ============================= */
    const menuItems = {
      People: ["Academic Staff", "Non-Academic Staff"],
      Education: ["Undergraduate", "Postgraduate"],
      Research: [
        "Impact Areas",
        "Facilities",
        { Projects: ["Undergraduate", "Postgraduate"] },
        { CMIPD: "https://cmipd.com" }, // Updated CMIPD to external link
      ],
      SOMES: [
        {
          Events: [
            "MESII",
            "MSE CricFiesta",
            "MSE Careers Day",
            "Dawasaka Hawasak",
          ],
        },
        { "Social Activities": ["Hasarella"] },
        "About",
      ],
      "News & Events": ["Announcements", "Events", "Calendar"],
      Services: ["Consultancy"],
      "Contact Us": null,
    };

    /* =============================
     INJECT MOBILE STYLES
     ============================= */
    const mobileStyles = `
  /* Mobile menu & hamburger styles injected by script */
  .dmse-hamburger {
    display: none;
    width:44px;
    height:44px;
    border-radius:8px;
    background: transparent;
    border: 1px solid rgba(0,0,0,0.06);
    align-items:center;
    justify-content:center;
    cursor:pointer;
  }
  .dmse-hamburger .bar {
    display:block;
    width:20px;
    height:2px;
    background:#131139;
    position:relative;
  }
  .dmse-hamburger .bar::before,
  .dmse-hamburger .bar::after {
    content:"";
    position:absolute;
    width:20px;
    height:2px;
    background:#131139;
    left:0;
  }
  .dmse-hamburger .bar::before { top:-6px; }
  .dmse-hamburger .bar::after { top:6px; }

  /* mobile panel */
  .dmse-mobile-panel {
    position: fixed;
    top: 0;
    right: -100%;
    width: 86%;
    max-width: 380px;
    height: 100vh;
    background: #ffffff;
    background: linear-gradient(180deg, #fff, #fbfbff);
    box-shadow: -20px 0 40px rgba(19,17,57,0.12);
    transition: right 320ms cubic-bezier(.2,.9,.2,1);
    z-index: 2000;
    padding: 20px;
    overflow-y: auto;
  }
  .dmse-mobile-panel.open { right: 0; }

  .dmse-mobile-close {
    display:flex;
    gap:8px;
    align-items:center;
    justify-content:flex-end;
    margin-bottom:8px;
  }
  .dmse-mobile-close button {
    background:transparent;
    border:0;
    font-size:20px;
    cursor:pointer;
    color:#131139;
  }

  .dmse-mobile-menu { padding: 8px 0; }
  .dmse-mobile-menu a {
    display:block;
    padding:10px 8px;
    text-decoration:none;
    color:#131139;
    font-weight:600;
    border-radius:6px;
  }
  .dmse-mobile-menu .mobile-dropdown {
    border-top:1px dashed rgba(0,0,0,0.04);
    margin-top:6px;
    padding-top:6px;
  }
  .dmse-mobile-menu .mobile-parent {
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:12px;
    cursor:pointer;
    padding:10px 8px;
  }
  .dmse-accordion-content {
    display:none;
    padding-left:8px;
    margin-bottom:8px;
  }
  .dmse-accordion-content.open { display:block; }

  /* show hamburger only on small screens */
  @media (max-width: ${MOBILE_BREAKPOINT}px) {
    .dmse-hamburger { display:flex !important; }
    header nav[aria-label="Primary"] { display:none !important; }
  }
  @media (min-width: ${MOBILE_BREAKPOINT + 1}px) {
    .dmse-mobile-panel { display:none !important; }
  }
  `;
    const styleTag = document.createElement("style");
    styleTag.setAttribute("type", "text/css");
    styleTag.appendChild(document.createTextNode(mobileStyles));
    document.head.appendChild(styleTag);

    /* =============================
     NAVBAR CREATION (desktop + mobile controls)
     ============================= */
    function createNavBar(parent) {
      // header
      const header = document.createElement("header");
      Object.assign(header.style, {
        display: "flex",
        justifyContent: "space-between",
        alignItems: "center",
        padding: "16px 24px",
        position: "sticky",
        top: "0",
        background: "rgba(251,251,253,0.98)",
        borderBottom: "1px solid rgba(0,0,0,0.06)",
        backdropFilter: "blur(6px)",
        zIndex: "999",
      });

      // logo
      const logoLink = document.createElement("a");
      logoLink.href = "/materials/test";
      const logo = document.createElement("img");
      logo.src = "/sites/default/files/materials/images/materials-log1_0.png";
      logo.alt = "Department of Material Science and Engineering";
      Object.assign(logo.style, { width: "100px", cursor: "pointer" });
      logoLink.appendChild(logo);

      // desktop nav
      const nav = document.createElement("nav");
      nav.setAttribute("aria-label", "Primary");
      Object.assign(nav.style, {
        display: "flex",
        gap: "20px",
        fontSize: "16px",
      });

      // build desktop dropdowns helper
      function buildDesktopDropdown(items) {
        const dropdownContent = document.createElement("div");
        Object.assign(dropdownContent.style, {
          display: "none",
          position: "absolute",
          top: "100%",
          left: "0",
          background: "rgba(251,251,253,1)",
          minWidth: "160px",
          boxShadow: "0 6px 18px rgba(19,17,57,0.06)",
          borderRadius: "6px",
          zIndex: "1000",
        });

        items.forEach((item) => {
          if (typeof item === "string") {
            const a = document.createElement("a");
            // default href generation for plain strings
            a.href =
              "/materials/test-" + item.toLowerCase().replace(/\s+/g, "-");
            a.textContent = item;
            Object.assign(a.style, {
              display: "block",
              padding: "10px 14px",
              textDecoration: "none",
              color: "#111",
              fontSize: "15px",
            });
            a.onmouseover = () => (a.style.background = "rgba(239,83,55,0.06)");
            a.onmouseout = () => (a.style.background = "transparent");
            dropdownContent.appendChild(a);
          } else if (typeof item === "object") {
            const [nestedTitle, nestedItems] = Object.entries(item)[0];

            // Check if this is an external link (CMIPD case)
            if (
              typeof nestedItems === "string" &&
              nestedItems.startsWith("http")
            ) {
              const a = document.createElement("a");
              a.href = nestedItems;
              a.textContent = nestedTitle;
              a.target = "_blank";
              Object.assign(a.style, {
                display: "block",
                padding: "10px 14px",
                textDecoration: "none",
                color: "#111",
                fontSize: "15px",
              });
              a.onmouseover = () =>
                (a.style.background = "rgba(239,83,55,0.06)");
              a.onmouseout = () => (a.style.background = "transparent");
              dropdownContent.appendChild(a);
              return;
            }

            const nestedWrapper = document.createElement("div");
            Object.assign(nestedWrapper.style, { position: "relative" });

            const nestedBtn = document.createElement("span");
            nestedBtn.textContent = nestedTitle;
            Object.assign(nestedBtn.style, {
              display: "flex",
              justifyContent: "space-between",
              alignItems: "center",
              gap: "12px",
              padding: "10px 14px",
              textDecoration: "none",
              color: "#111",
              fontSize: "15px",
              cursor: "default",
            });

            const arrow = document.createElement("span");
            arrow.textContent = "▸";
            arrow.style.marginLeft = "auto";
            nestedBtn.appendChild(arrow);

            // Special-case: if this nested group is "Projects", create the links
            // with the explicit routes required by the department.
            let nestedContent;
            if (String(nestedTitle).toLowerCase() === "projects") {
              nestedContent = document.createElement("div");
              Object.assign(nestedContent.style, {
                display: "none",
                position: "absolute",
                top: "0",
                left: "100%",
                minWidth: "180px",
                boxShadow: "0 6px 18px rgba(19,17,57,0.06)",
                borderRadius: "6px",
                background: "rgba(251,251,253,1)",
              });

              nestedItems.forEach((sub) => {
                const a = document.createElement("a");
                const name = String(sub).toLowerCase();
                if (name.includes("undergrad")) {
                  a.href = "/materials/test-projects-undergraduates";
                } else if (
                  name.includes("postgrad") ||
                  name.includes("postgraduate")
                ) {
                  a.href = "/materials/test-projects-postgraduates";
                } else {
                  // fallback to the previous pattern
                  a.href = "/materials/test-" + name.replace(/\s+/g, "-");
                }
                a.textContent = sub;
                Object.assign(a.style, {
                  display: "block",
                  padding: "10px 14px",
                  textDecoration: "none",
                  color: "#111",
                  fontSize: "15px",
                });
                a.onmouseover = () =>
                  (a.style.background = "rgba(239,83,55,0.06)");
                a.onmouseout = () => (a.style.background = "transparent");
                nestedContent.appendChild(a);
              });
            } else {
              // non-Projects nested groups: reuse recursive builder
              nestedContent = buildDesktopDropdown(nestedItems);
              Object.assign(nestedContent.style, {
                top: "0",
                left: "100%",
                marginLeft: "0px",
              });
            }

            nestedWrapper.appendChild(nestedBtn);
            nestedWrapper.appendChild(nestedContent);

            nestedWrapper.onmouseover = () =>
              (nestedContent.style.display = "block");
            nestedWrapper.onmouseout = () =>
              (nestedContent.style.display = "none");

            dropdownContent.appendChild(nestedWrapper);
          }
        });

        return dropdownContent;
      }
      // <-- RESTORED: build desktop menu from menuItems -->
      for (const [menu, subItems] of Object.entries(menuItems)) {
        if (!subItems) {
          const a = document.createElement("a");
          if (menu === "Contact Us") a.href = "/materials/test-contact-us";
          else a.href = "#" + menu.toLowerCase().replace(/\s+/g, "-");
          a.textContent = menu;
          Object.assign(a.style, {
            textDecoration: "none",
            color: "#111",
            fontSize: "16px",
            fontWeight: "500",
            padding: "6px 8px",
            display: "inline-block",
          });
          nav.appendChild(a);
          continue;
        }

        const dropdown = document.createElement("div");
        Object.assign(dropdown.style, { position: "relative" });

        const button = document.createElement("span");
        button.textContent = menu;
        Object.assign(button.style, {
          textDecoration: "none",
          color: "#111",
          fontSize: "16px",
          fontWeight: "500",
          padding: "6px 8px",
          display: "inline-block",
          cursor: "default",
        });

        const dropdownContent = buildDesktopDropdown(subItems);

        dropdown.appendChild(button);
        dropdown.appendChild(dropdownContent);

        // hover behavior for desktop
        dropdown.onmouseover = () => (dropdownContent.style.display = "block");
        dropdown.onmouseout = () => (dropdownContent.style.display = "none");

        nav.appendChild(dropdown);
      }

      // MOBILE: hamburger button
      const hamburger = el(
        "button",
        {
          class: "dmse-hamburger",
          "aria-label": "Open menu",
          "aria-expanded": "false",
          type: "button",
          style: {
            display: "none",
            background: "transparent",
            border: "1px solid rgba(0,0,0,0.06)",
          },
        },
        [el("span", { class: "bar" })]
      );

      // MOBILE PANEL (hidden by default)
      const mobilePanel = el("nav", {
        class: "dmse-mobile-panel",
        "aria-hidden": "true",
      });

      // mobile panel close row
      const closeRow = el("div", { class: "dmse-mobile-close" }, [
        el("div", {}, []),
        el("div", {}, [
          el(
            "button",
            {
              "aria-label": "Close menu",
              type: "button",
              onclick: () => closeMobile(),
            },
            "✕"
          ),
        ]),
      ]);

      mobilePanel.appendChild(closeRow);

      // Build mobile menu content (accordion-style)
      const mobileMenu = el("div", { class: "dmse-mobile-menu" });

      function buildMobileSection(title, items) {
        if (!items) {
          // simple link
          const link = el(
            "a",
            {
              href:
                "/materials/test-" + title.toLowerCase().replace(/\s+/g, "-"),
              class: "mobile-link",
            },
            title
          );
          return link;
        }

        const wrapper = el("div", { class: "mobile-dropdown" });
        const parentRow = el(
          "div",
          { class: "mobile-parent", role: "button", tabindex: "0" },
          [el("span", {}, title), el("span", {}, "▾")]
        );

        const content = el("div", { class: "dmse-accordion-content" });

        items.forEach((item) => {
          if (typeof item === "string") {
            const a = el(
              "a",
              {
                href:
                  "/materials/test-" + item.toLowerCase().replace(/\s+/g, "-"),
              },
              item
            );
            content.appendChild(a);
          } else if (typeof item === "object") {
            const [nestedTitle, nestedItems] = Object.entries(item)[0];

            // Check if this is an external link (CMIPD case)
            if (
              typeof nestedItems === "string" &&
              nestedItems.startsWith("http")
            ) {
              const a = el(
                "a",
                { href: nestedItems, target: "_blank" },
                nestedTitle
              );
              content.appendChild(a);
              return;
            }

            const nestedParent = el(
              "div",
              { class: "mobile-parent", role: "button", tabindex: "0" },
              [el("span", {}, nestedTitle), el("span", {}, "▾")]
            );
            const nestedContent = el("div", {
              class: "dmse-accordion-content",
            });

            nestedItems.forEach((sub) => {
              const subText = String(sub);
              const lower = subText.toLowerCase();
              let href;
              // special mapping for Projects -> undergrad/postgrad routes
              if (String(nestedTitle).toLowerCase() === "projects") {
                if (lower.includes("undergrad"))
                  href = "/materials/test-projects-undergraduates";
                else if (
                  lower.includes("postgrad") ||
                  lower.includes("postgraduate")
                )
                  href = "/materials/test-projects-postgraduates";
                else href = "/materials/test-" + lower.replace(/\s+/g, "-");
              } else {
                href = "/materials/test-" + lower.replace(/\s+/g, "-");
              }
              const a = el("a", { href: href }, subText);
              nestedContent.appendChild(a);
            });

            // click toggles
            nestedParent.addEventListener("click", () => {
              nestedContent.classList.toggle("open");
            });
            nestedParent.addEventListener("keypress", (e) => {
              if (e.key === "Enter") nestedParent.click();
            });
            content.appendChild(nestedParent);
            content.appendChild(nestedContent);
          }
        });

        // attach toggle for parentRow
        parentRow.addEventListener("click", () => {
          content.classList.toggle("open");
        });
        parentRow.addEventListener("keypress", (e) => {
          if (e.key === "Enter") parentRow.click();
        });

        wrapper.appendChild(parentRow);
        wrapper.appendChild(content);
        return wrapper;
      }

      // Build mobile menu: SKIP adding "Contact Us" here to avoid duplicate (bottom CTA kept)
      for (const [menu, subItems] of Object.entries(menuItems)) {
        if (menu === "Contact Us") continue; // <-- prevents duplicate contact inside accordion
        const node = buildMobileSection(menu, subItems);
        mobileMenu.appendChild(node);
      }

      // append a small contact link at bottom (kept)
      const contactCTA = el(
        "div",
        {
          style: {
            marginTop: "12px",
            paddingTop: "12px",
            borderTop: "1px solid rgba(0,0,0,0.04)",
          },
        },
        [
          el(
            "a",
            {
              href: "/materials/test-contact-us",
              style: {
                display: "inline-block",
                padding: "8px 12px",
                borderRadius: "8px",
                background: "rgba(19,17,57,0.04)",
                fontWeight: "700",
                textDecoration: "none",
                color: "#131139",
              },
            },
            "Contact us"
          ),
        ]
      );
      mobilePanel.appendChild(mobileMenu);
      mobilePanel.appendChild(contactCTA);

      // add all to header
      header.appendChild(logoLink);
      header.appendChild(nav);
      header.appendChild(hamburger);

      // append header and mobile panel to parent (body)
      parent.insertBefore(header, parent.firstChild);
      document.body.appendChild(mobilePanel);

      // mobile open/close handlers
      function openMobile() {
        mobilePanel.classList.add("open");
        mobilePanel.setAttribute("aria-hidden", "false");
        hamburger.setAttribute("aria-expanded", "true");
        document.body.style.overflow = "hidden";
      }
      function closeMobile() {
        mobilePanel.classList.remove("open");
        mobilePanel.setAttribute("aria-hidden", "true");
        hamburger.setAttribute("aria-expanded", "false");
        document.body.style.overflow = "";
      }

      // toggle by hamburger
      hamburger.addEventListener("click", () => {
        if (mobilePanel.classList.contains("open")) closeMobile();
        else openMobile();
      });

      // close when clicking outside panel
      document.addEventListener("click", (e) => {
        if (!mobilePanel.classList.contains("open")) return;
        const isInside =
          mobilePanel.contains(e.target) || header.contains(e.target);
        if (!isInside) closeMobile();
      });

      // ESC to close
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && mobilePanel.classList.contains("open"))
          closeMobile();
      });

      // responsive toggling on resize
      function applyResponsiveVisibility() {
        const isMobile = window.innerWidth <= MOBILE_BREAKPOINT;
        if (isMobile) {
          nav.style.display = "none";
          hamburger.style.display = "flex";
        } else {
          nav.style.display = "flex";
          hamburger.style.display = "none";
          // ensure mobile panel closed
          closeMobile();
        }
      }
      applyResponsiveVisibility();
      window.addEventListener("resize", applyResponsiveVisibility);
    }

    /* =============================
     Minimal footer
     ============================= */
    function createFooter(parent) {
      const existingFooter = document.querySelector(
        'footer[data-dmse-minimal="true"]'
      );
      if (existingFooter) return; // avoid double-append

      const footer = document.createElement("footer");
      footer.setAttribute("data-dmse-minimal", "true");
      Object.assign(footer.style, {
        background: "#f7f7fb",
        padding: "16px 20px",
        textAlign: "center",
        fontSize: "16px",
        color: "#3b3b4a",
        borderTop: "1px solid rgba(0,0,0,0.04)",
        marginTop: "auto",
      });

      const year = new Date().getFullYear();
      footer.innerHTML = `
      <div style="max-width:1100px; margin:0 auto;">
        <small style="color:#3b3b4a;">
          &copy; ${year} DMSE - University of Moratuwa
        </small>
      </div>
    `;
      parent.appendChild(footer);
    }

    /* =============================
     ROUTING FIX: rewrite anchors inside #main-content
     ============================= */
    function rewriteMainAnchors() {
      const main = document.getElementById("main-content");
      if (!main) return;
      const anchors = Array.from(main.querySelectorAll("a"));
      anchors.forEach((a) => {
        try {
          const href = (a.getAttribute("href") || "").trim();
          if (href.startsWith("#")) {
            const slug = href
              .slice(1)
              .toLowerCase()
              .replace(/\s+/g, "-")
              .replace(/[^\w\-]/g, "");
            if (slug.length > 0)
              a.setAttribute("href", "/materials/test-" + slug);
          } else if (!href || href === "#" || href === "javascript:void(0)") {
            const txt = (a.textContent || "").trim();
            if (txt.length > 0 && txt.length < 50) {
              const slug = txt
                .toLowerCase()
                .replace(/\s+/g, "-")
                .replace(/[^\w\-]/g, "");
              if (slug.length > 0)
                a.setAttribute("href", "/materials/test-" + slug);
            }
          }
        } catch (e) {
          console.warn("link rewrite error", e);
        }
      });
    }

    /* Initialize once DOM is ready */
    document.addEventListener("DOMContentLoaded", function () {
      createNavBar(document.body);
      createFooter(document.body);
      rewriteMainAnchors();
    });
  })();
</script>
<style type="text/css">
  :root {
    --brand: #131139;
    --accent: #e34234;
    --accent-light: rgba(227, 66, 52, 0.08);
    --muted: #6f6f83;
    --muted-light: rgba(111, 111, 131, 0.1);
    --bg: #f5f7fa;
    --card-bg: #ffffff;
    --radius: 16px;
    --radius-sm: 10px;
    --container: min(1200px, 95vw);
    --flow-gap: 16px;
    --base-fs: 16px;
    --h1: clamp(2.5rem, 6vw, 3.5rem);
    --h2: clamp(1.75rem, 4.5vw, 2.5rem);
    --h3: clamp(1.35rem, 3.5vw, 1.75rem);
    --h4: clamp(1.15rem, 2.5vw, 1.35rem);
    --lead: clamp(1rem, 2.2vw, 1.25rem);
    --body: clamp(0.95rem, 2vw, 1.05rem);
    --small: clamp(0.85rem, 1.5vw, 0.9rem);
    --shadow-1: 0 8px 24px rgba(19, 17, 57, 0.08);
    --shadow-2: 0 15px 35px rgba(0, 0, 0, 0.1);
    --shadow-3: 0 20px 45px rgba(0, 0, 0, 0.15);
    --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --gradient-1: linear-gradient(135deg, var(--accent) 0%, #ff6b5a 100%);
    --gradient-2: linear-gradient(135deg, var(--brand) 0%, #2a2660 100%);
  }

  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    -webkit-tap-highlight-color: transparent;
  }

  html {
    font-size: var(--base-fs);
    scroll-behavior: smooth;
    overflow-x: hidden;
  }

  body {
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto,
      "Helvetica Neue", Arial, sans-serif !important;
    color: var(--brand);
    background: var(--bg);
    background-image: radial-gradient(
        circle at 20% 50%,
        rgba(227, 66, 52, 0.03) 0%,
        transparent 50%
      ),
      radial-gradient(
        circle at 80% 80%,
        rgba(19, 17, 57, 0.03) 0%,
        transparent 50%
      );
    background-attachment: fixed;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  /* ===========================
       TYPOGRAPHY
       =========================== */
  h1,
  h2,
  h3,
  h4,
  h5 {
    font-weight: 800;
    line-height: 1.2;
    margin-bottom: 1.25rem;
    color: var(--brand);
    letter-spacing: -0.02em;
  }

  h1 {
    font-size: var(--h1);
    background: var(--gradient-2);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  h2 {
    font-size: var(--h2);
    margin-top: 1rem;
    position: relative;
    padding-bottom: 0.5rem;
  }
  h3 {
    font-size: var(--h3);
  }
  h4 {
    font-size: var(--h4);
  }

  p,
  li {
    font-size: var(--body);
    color: var(--muted);
    margin-bottom: 1rem;
    line-height: 1.8;
  }

  .lead {
    font-size: var(--lead);
    font-weight: 500;
    color: var(--brand);
    line-height: 1.7;
    margin-bottom: 2rem;
  }

  small,
  .small {
    font-size: var(--small);
  }

  a {
    color: var(--accent);
    text-decoration: none;
    transition: var(--transition);
    position: relative;
  }

  a:hover,
  a:focus {
    color: var(--brand);
  }

  /* ===========================
       LAYOUT & CONTAINERS
       =========================== */
  .container {
    width: 100%;
    max-width: 100%;
    margin: 0;
    padding: 0;
  }

  .section {
    padding: 1.5rem 4rem;
    width: 100%;
  }

  .section .content-wrapper {
    max-width: 1200px;
    margin: 0 auto;
  }

  /* ===========================
       PAGE HERO SECTION
       =========================== */
  .page-hero {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 2rem;
    width: 100%;
    position: relative;
    background: linear-gradient(180deg, #0a0a1f 0%, #1a1a3e 50%, #2a2a5e 100%);
    overflow: hidden;
    margin: 0 !important;
  }

  .page-hero::before {
    content: "";
    position: absolute;
    inset: 0;
    background-image: radial-gradient(
        circle at 20% 30%,
        rgba(227, 66, 52, 0.15) 0%,
        transparent 40%
      ),
      radial-gradient(
        circle at 80% 70%,
        rgba(100, 100, 255, 0.1) 0%,
        transparent 40%
      );
    z-index: 0;
  }

  .page-hero-content {
    max-width: 1000px;
    animation: fadeInUp 0.8s ease-out;
    position: relative;
    z-index: 2;
  }

  .page-hero h1 {
    color: white;
    background: linear-gradient(135deg, #ffffff 0%, #e0e0ff 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-shadow: none;
    margin-bottom: 1rem;
    font-size: clamp(2.2rem, 5vw, 3.5rem);
    line-height: 1.1;
  }

  .page-hero .lead {
    color: rgba(255, 255, 255, 0.85);
    font-size: clamp(1rem, 2vw, 1.2rem);
    margin-bottom: 0;
    font-weight: 400;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
  }

  .kicker {
    display: inline-block;
    text-transform: uppercase;
    color: rgba(255, 255, 255, 0.7);
    background: transparent;
    letter-spacing: 0.15rem;
    font-weight: 600;
    font-size: clamp(0.75rem, 1.8vw, 0.95rem);
    padding: 0;
    border-radius: 0;
    margin-bottom: 1rem;
    box-shadow: none;
    border-bottom: 2px solid rgba(227, 66, 52, 0.5);
    padding-bottom: 0.5rem;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* ===========================
       CONTENT GRID & CARDS
       =========================== */
  .content-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
  }

  .content-card {
    background: var(--card-bg);
    border-radius: var(--radius-sm);
    overflow: hidden;
    box-shadow: var(--shadow-1);
    transition: var(--transition);
    border: 1px solid rgba(0, 0, 0, 0.04);
    display: flex;
    flex-direction: column;
  }

  @media (min-width: 600px) {
    .content-card:hover {
      transform: translateY(-8px);
      box-shadow: var(--shadow-2);
    }
  }

  .content-card img {
    width: 100%;
    height: auto;
    object-fit: cover;
    border-radius: var(--radius-sm) var(--radius-sm) 0 0;
  }

  .content-card h3 {
    color: var(--accent);
    font-size: var(--h4);
    margin-bottom: 0.75rem;
    margin-top: 0;
  }

  .content-card p {
    color: var(--muted);
    font-size: var(--body);
    margin-bottom: 0;
  }

  .card-content {
    padding: 1.5rem;
    flex-grow: 1;
  }

  /* ===========================
       FOCUS AREAS SECTION
       =========================== */
  .focus-areas {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 1rem;
    max-width: 1200px;
    margin: 2rem auto;
  }

  .focus-item {
    padding: 1.5rem;
    background: linear-gradient(
      135deg,
      rgba(227, 66, 52, 0.08) 0%,
      rgba(227, 66, 52, 0.04) 100%
    );
    border-left: 4px solid var(--accent);
    border-radius: var(--radius-sm);
    transition: var(--transition);
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100px;
  }

  .focus-item:hover {
    box-shadow: var(--shadow-1);
    transform: translateX(4px);
  }

  .focus-item p {
    margin: 0;
    color: var(--brand);
    font-weight: 600;
    font-size: var(--body);
  }

  /* ===========================
       CTA SECTION
       =========================== */
  .cta-section {
    background: var(--gradient-1);
    color: white;
    padding: 3rem 2rem;
    text-align: center;
    border-radius: var(--radius-sm);
    margin: 2rem auto;
    max-width: 1000px;
  }

  .cta-section h2 {
    color: white;
    margin-top: 0;
  }

  .cta-section p {
    color: rgba(255, 255, 255, 0.9);
    margin-bottom: 2rem;
  }

  .cta-button {
    display: inline-block;
    padding: 0.85rem 2rem;
    background: white;
    color: var(--brand);
    text-decoration: none;
    font-weight: 700;
    border-radius: 6px;
    transition: var(--transition);
    font-size: var(--body);
  }

  .cta-button:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
  }

  /* ===========================
       FOOTER
       =========================== */
  footer[data-dmse-minimal="true"] {
    background: linear-gradient(135deg, #131139 0%, #1a1850 100%);
    padding: 3rem 1rem 2rem;
    text-align: center;
    font-size: var(--small);
    color: rgba(255, 255, 255, 0.8);
    border-top: 3px solid var(--accent);
    margin-top: auto;
  }

  footer[data-dmse-minimal="true"] p {
    color: rgba(255, 255, 255, 0.9);
  }

  /* ===========================
       UTILITY CLASSES
       =========================== */
  .text-center {
    text-align: center;
  }
  .mt-1 {
    margin-top: 1rem;
  }
  .mt-2 {
    margin-top: 2rem;
  }
  .mb-1 {
    margin-bottom: 1rem;
  }
  .mb-2 {
    margin-bottom: 2rem;
  }

  /* ===========================
       ACCESSIBILITY
       =========================== */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  a:focus,
  button:focus {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
  }

  /* ===========================
       EXTERNAL LINK ICON
       =========================== */
  #undergraduate-life h2 a::after {
    content: " ↗";
    font-size: 0.85em;
    margin-left: 0.3rem;
    color: var(--accent);
  }
  @media (min-width: 768px) {
    .section {
      padding: 2rem 3rem;
    }

    .page-hero {
      padding: 5rem 3rem;
    }
  }
</style>
<main>
  <!-- PAGE HERO SECTION -->
  <section class="page-hero" id="undergraduate">
    <div class="page-hero-content">
      <span class="kicker">Education Programs</span>
      <h1>Undergraduate Programs</h1>

      <p class="lead">
        Explore the journey designed to prepare future innovators, engineers,
        and industry leaders in materials science and engineering.
      </p>
    </div>
  </section>

  <!-- ABOUT UNDERGRADUATES -->
  <section class="section" id="about-undergraduates">
    <div class="content-wrapper">
      <h2>About Our Undergraduates</h2>

      <p>
        The undergraduate program at DMSE offers students a strong foundation in
        materials engineering principles, while also exposing them to
        cutting-edge research and real-world applications. Our students are
        trained to think critically, solve complex engineering problems, and
        contribute to advancing technology across multiple industries.
      </p>
    </div>
  </section>

  <!-- OPPORTUNITIES -->
  <section class="section" id="opportunities">
    <div class="container">
      <h2 class="text-center">Opportunities for Undergraduates</h2>

      <div class="content-grid">
        <article class="content-card">
          <img
            alt="Research Projects"
            src="https://uom.lk/sites/default/files/materials/images/research_0.jpg"
          />
          <div class="card-content">
            <h3>Research Projects</h3>

            <p>
              Students engage in industry-linked and faculty-led research
              projects, fostering innovation and practical skills.
            </p>
          </div>
        </article>

        <article class="content-card">
          <img
            alt="Internships"
            src="https://uom.lk/sites/default/files/materials/images/internships_0.png"
          />
          <div class="card-content">
            <h3>Internships</h3>

            <p>
              Industrial placements provide students with hands-on experience in
              leading organizations across materials, manufacturing, and
              technology sectors.
            </p>
          </div>
        </article>

        <article class="content-card">
          <img
            alt="Global Exposure"
            src="https://uom.lk/sites/default/files/materials/images/connections.jpg"
          />
          <div class="card-content">
            <h3>Global Exposure</h3>

            <p>
              Exchange programs and international conferences give
              undergraduates a platform to network and collaborate globally.
            </p>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- MINORS & FOCUS AREAS -->
  <section class="section" id="focus-areas">
    <div class="container">
      <h2 class="text-center">Minors &amp; Focus Areas</h2>

      <div class="focus-areas">
        <div class="focus-item">
          <p>Nanotechnology &amp; Advanced Materials</p>
        </div>

        <div class="focus-item">
          <p>Metallurgy &amp; Manufacturing</p>
        </div>

        <div class="focus-item">
          <p>Polymer Science &amp; Engineering</p>
        </div>

        <div class="focus-item">
          <p>Energy Materials &amp; Sustainability</p>
        </div>

        <div class="focus-item">
          <p>Computational Materials Engineering</p>
        </div>
      </div>
    </div>
  </section>

  <!-- UNDERGRADUATE LIFE -->
  <section class="section" id="undergraduate-life">
    <div class="content-wrapper">
      <h2 class="text-center">
        <a href="/materials/test-about" target="_blank"
          >Undergraduate Life at DMSE</a
        >
      </h2>

      <p class="text-center">
        Life as a DMSE undergraduate is vibrant and dynamic. Beyond academics,
        students actively participate in student societies, sports, cultural
        activities, and leadership opportunities. This holistic environment
        ensures personal growth, teamwork, and the development of leadership
        skills essential for future success.
      </p>
    </div>
  </section>

  <!-- CTA -->
  <section class="cta-section">
    <h2>Join Our Undergraduate Community</h2>

    <p>
      Be part of an engaging academic journey with rich student life
      experiences.
    </p>
    <a href="/materials/test-contact-us" class="cta-button">Contact Us</a>
  </section>
</main>
